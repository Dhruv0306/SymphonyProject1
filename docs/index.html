<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Validation Using Logo Detection - Symphony Limited</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" type="image/png" href="https://shop.symphonylimited.com/cdn/shop/files/logo-new-header.png?v=1704892972">
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div class="documentation-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <img src="https://shop.symphonylimited.com/cdn/shop/files/logo-new-header.png?v=1704892972" alt="Symphony Logo" class="logo">
                <h2>Documentation</h2>
                <button id="menuToggle" class="menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                    <i class="fas fa-bars" aria-hidden="true"></i>
                </button>
            </div>
            <ul class="nav-links">
                <li><a href="#overview"><i class="fas fa-home"></i> Overview</a></li>
                <li><a href="#getting-started" class="active"><i class="fas fa-rocket"></i> Quick Start</a></li>

                <li><a href="#features"><i class="fas fa-star"></i> Key Features</a></li>
                <li><a href="#performance"><i class="fas fa-chart-line"></i> Performance</a></li>
                <li><a href="#models"><i class="fas fa-brain"></i> Detection Models</a></li>
                <li><a href="#rate-limits"><i class="fas fa-tachometer-alt"></i> Rate Limits</a></li>
                <li><a href="#single-image"><i class="fas fa-image"></i> Single Image Detection</a></li>
                <li><a href="#batch-processing"><i class="fas fa-images"></i> Batch Processing</a></li>
                <li><a href="#api-integration"><i class="fas fa-code"></i> API Integration</a></li>
                <li><a href="#troubleshooting"><i class="fas fa-wrench"></i> Troubleshooting</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content" id="main-content">
            <header class="header">
                <h1>Image Validation Using Logo Detection</h1>
                <p class="subtitle">Enterprise-Grade Logo Detection System by Symphony Limited</p>
                <div class="search-box">
                    <input type="text" placeholder="Search the documentation..." aria-label="Search documentation">
                    <i class="fas fa-search" aria-hidden="true"></i>
                    <button class="search-clear" title="Clear search" style="display: none;"><i class="fas fa-times"></i></button>
                </div>
            </header>

            <!-- Overview Section -->
            <section id="overview" class="content-section">
                <h2>Overview</h2>
                <div class="card overview">
                    <p><strong>Symphony Logo Detection</strong> is an enterprise-grade API and batch processing system for validating images using advanced YOLO models. The latest version introduces:</p>
                    <ul>
                        <li><span class="feature-badge admin-feature">Admin Authentication</span> for secure dashboard access</li>
                        <li><span class="feature-badge env-feature">Environment-based Configuration</span> via <code>.env</code> file</li>
                        <li><span class="feature-badge log-feature">Improved Logging</span> with rotation and error tracking</li>
                        <li><span class="feature-badge security-feature">Security</span> with session, CSRF, and CORS protection</li>
                        <li><span class="feature-badge yolo-feature">YOLO Microservice</span> URL is now configurable</li>
                        <li><span class="feature-badge cleanup-feature">Smart Cleanup</span> with pending batch protection</li>
                        <li><span class="feature-badge ratelimit-feature">Rate Limiting</span> to prevent abuse</li>
                        <li><span class="feature-badge fault-tolerance">Fault-Tolerant Processing</span> with automatic recovery</li>
                        <li><span class="feature-badge file-storage">File-Based Batch Processing</span> with disk persistence</li>
                    </ul>
                </div>
            </section>

            <!-- Quick Start Section -->
            <section id="getting-started" class="content-section">
                <h2>Quick Start Guide</h2>
                <div class="card overview">
                    <ol>
                        <li><strong>Clone the repository</strong> and install dependencies.</li>
                        <li><strong>Configure environment variables:</strong>
                            <pre class="code-block env-example"><code># Copy .env.example to .env and edit values
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_secure_password
SMTP_SERVER=...
YOLO_SERVICE_URL=http://localhost:8001
...</code></pre>
                            <button class="copy-btn" data-copy-target=".env-example"><i class="fas fa-copy"></i> Copy .env Example</button>
                        </li>
                        <li><strong>Start the backend and frontend servers.</strong></li>
                        <li><strong>Access the admin dashboard</strong> for monitoring and batch management.</li>
                    </ol>
                </div>
                <div class="card system-requirements">
                    <h3>System Requirements</h3>
                    <ul>
                        <li>Python 3.11+</li>
                        <li>Node.js 18+ (for frontend)</li>
                        <li>YOLOv8/YOLOv11 model weights</li>
                        <li>Fault tolerance support for production reliability</li>
                    </ul>
                </div>
            </section>



            <!-- Key Features Section -->
            <section id="features" class="content-section">
                <h2>Key Features</h2>
                <div class="card feature-card">
                    <ul>
                        <li><strong>Admin Dashboard:</strong> Secure login, session management, and batch history</li>
                        <li><strong>Configurable via .env:</strong> Easily set SMTP, YOLO service, and security settings</li>
                        <li><strong>Rate Limiting & CORS:</strong> Prevents abuse and allows safe frontend integration</li>
                        <li><strong>Smart Cleanup:</strong> Preserves pending batches while cleaning old data</li>
                        <li><strong>Detailed Logging:</strong> Rotating logs for all requests and errors</li>
                        <li><strong>Fault-Tolerant Processing:</strong> Automatic recovery from server restarts</li>
                        <li><strong>File-Based Batches:</strong> Persistent storage for reliable batch processing</li>
                    </ul>
                </div>
                
                <!-- System Architecture Diagram -->
                <div class="card diagram-card">
                    <h3>System Architecture Overview</h3>
                    <div class="svg-container">
                        <div class="zoom-controls">
                            <button class="zoom-btn zoom-in" title="Zoom In"><i class="fas fa-search-plus"></i></button>
                            <button class="zoom-btn zoom-out" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
                            <button class="zoom-btn zoom-reset" title="Reset Zoom"><i class="fas fa-expand-arrows-alt"></i></button>
                        </div>
                        <object data="images/svg/system_overview.svg" type="image/svg+xml" class="responsive-svg">
                            <img src="images/svg/system_overview.svg" alt="System Architecture" class="fallback-img">
                        </object>
                    </div>
                </div>
                
                <!-- Multi-Model Detection -->
                <div class="card feature-card">
                    <h3><i class="fas fa-brain"></i> Cascading Model Architecture</h3>
                    <div class="feature-content">
                        <ul>
                            <li>
                                <strong>Progressive Detection:</strong>
                                <ul>
                                    <li>yolov8s_logo_detection - Primary model</li>
                                    <li>yolov8s_logo_detection2 - Enhanced training data</li>
                                    <li>yolov8s_logo_detection3 - Refined parameters</li>
                                    <li>yolov11s_logo_detection - Advanced YOLOv11s</li>
                                    <li>yolov11s3_logo_detection - Optimized YOLOv11s</li>
                                    <li>yolov11s_cooler_detection - YOLOv11s with cooler dataset</li>
                                </ul>
                            </li>
                            <li>
                                <strong>Confidence Thresholds:</strong>
                                <ul>
                                    <li>0.35 confidence threshold for validation</li>
                                    <li>Automatic model progression</li>
                                    <li>Ensemble processing for difficult cases</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Rate Limiting -->
                <div class="card feature-card">
                    <h3><i class="fas fa-tachometer-alt"></i> Rate Limiting</h3>
                    <div class="feature-content">
                        <ul>
                            <li>
                                <strong>Endpoint Limits:</strong>
                                <ul>
                                    <li>Single image: 100 requests/minute</li>
                                    <li>Batch processing: 20 requests/minute</li>
                                    <li>CSV export: 20 requests/minute</li>
                                </ul>
                            </li>
                            <li>
                                <strong>Rate Monitoring:</strong>
                                <ul>
                                    <li>Real-time limit tracking</li>
                                    <li>Remaining requests display</li>
                                    <li>Reset time indicators</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Security Features -->
                <div class="card feature-card">
                    <h3><i class="fas fa-shield-alt"></i> Security Features</h3>
                    <div class="feature-content">
                        <ul>
                            <li>
                                <strong>Input Validation:</strong>
                                <ul>
                                    <li>File type filtering</li>
                                    <li>Size limit enforcement</li>
                                    <li>Content validation</li>
                                </ul>
                            </li>
                            <li>
                                <strong>Protection Measures:</strong>
                                <ul>
                                    <li>CORS protection</li>
                                    <li>Request validation</li>
                                    <li>Resource limits</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Fault-Tolerant Batch Processing -->
                <div class="card feature-card">
                    <h3><i class="fas fa-shield-alt"></i> Fault-Tolerant Batch Processing</h3>
                    <div class="feature-content">
                        <ul>
                            <li>
                                <strong>Problem Solved:</strong>
                                <ul>
                                    <li>Server restarts caused batch data loss</li>
                                    <li>Incomplete batches wasted compute time</li>
                                    <li>Poor reliability for large batch jobs</li>
                                </ul>
                            </li>
                            <li>
                                <strong>Solution Features:</strong>
                                <ul>
                                    <li>File-based batch processing with disk persistence</li>
                                    <li>Automatic recovery from server restarts</li>
                                    <li>Dual tracking system (URLs + Files)</li>
                                    <li>Smart cleanup preserves pending batches</li>
                                    <li>Complete batch lifecycle management</li>
                                </ul>
                            </li>
                            <li>
                                <strong>Recovery Process:</strong>
                                <ul>
                                    <li>On startup: Scan for pending batch files</li>
                                    <li>Resume processing from last saved state</li>
                                    <li>Clean up completed batches automatically</li>
                                    <li>Preserve batches for 3 days before cleanup</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Performance Metrics Section -->
            <section id="performance" class="content-section">
                <h2>Performance Metrics</h2>
                <div class="card model-performance">
                    <h3><i class="fas fa-brain"></i> Model Performance Comparison</h3>
                    <div class="performance-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Model</th>
                                    <th>Accuracy</th>
                                    <th>Speed</th>
                                    <th>Confidence Threshold</th>
                                    <th>Use Case</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>yolov8s_logo_detection</strong></td>
                                    <td>89.2%</td>
                                    <td>0.15s</td>
                                    <td>0.35</td>
                                    <td>Primary detection</td>
                                </tr>
                                <tr>
                                    <td><strong>yolov8s_logo_detection2</strong></td>
                                    <td>91.8%</td>
                                    <td>0.18s</td>
                                    <td>0.35</td>
                                    <td>Enhanced training</td>
                                </tr>
                                <tr>
                                    <td><strong>yolov8s_logo_detection3</strong></td>
                                    <td>93.1%</td>
                                    <td>0.22s</td>
                                    <td>0.35</td>
                                    <td>Refined parameters</td>
                                </tr>
                                <tr>
                                    <td><strong>yolov11s_logo_detection</strong></td>
                                    <td>94.7%</td>
                                    <td>0.25s</td>
                                    <td>0.35</td>
                                    <td>Advanced detection</td>
                                </tr>
                                <tr>
                                    <td><strong>yolov11s3_logo_detection</strong></td>
                                    <td>95.3%</td>
                                    <td>0.28s</td>
                                    <td>0.35</td>
                                    <td>Optimized YOLOv11s</td>
                                </tr>
                                <tr>
                                    <td><strong>yolov11s_cooler_detection</strong></td>
                                    <td>96.1%</td>
                                    <td>0.26s</td>
                                    <td>0.35</td>
                                    <td>Cooler specialized</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Detection Models Section -->
            <section id="models" class="content-section">
                <h2>Detection Models</h2>
                
                <!-- Image Processing Pipeline Diagram -->
                <div class="card diagram-card">
                    <h3>Image Processing Pipeline</h3>
                    <div class="svg-container">
                        <div class="zoom-controls">
                            <button class="zoom-btn zoom-in" title="Zoom In"><i class="fas fa-search-plus"></i></button>
                            <button class="zoom-btn zoom-out" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
                            <button class="zoom-btn zoom-reset" title="Reset Zoom"><i class="fas fa-expand-arrows-alt"></i></button>
                        </div>
                        <object data="images/svg/model_architecture.svg" type="image/svg+xml" class="responsive-svg">
                            <img src="images/svg/model_architecture.svg" alt="Model Architecture" class="fallback-img">
                        </object>
                    </div>
                </div>
                <div class="card models">
                    <h3>Model Architecture</h3>
                    <div class="model-grid">
                        <div class="model">
                            <i class="fas fa-microchip"></i>
                            <h4>Model 1</h4>
                            <p>yolov8s_logo_detection</p>
                        </div>
                        <div class="model">
                            <i class="fas fa-microchip"></i>
                            <h4>Model 2</h4>
                            <p>yolov8s_logo_detection2</p>
                        </div>
                        <div class="model">
                            <i class="fas fa-microchip"></i>
                            <h4>Model 3</h4>
                            <p>yolov8s_logo_detection3</p>
                        </div>
                        <div class="model">
                            <i class="fas fa-brain"></i>
                            <h4>Model 4</h4>
                            <p>yolov11s_logo_detection</p>
                        </div>
                        <div class="model">
                            <i class="fas fa-brain"></i>
                            <h4>Model 5</h4>
                            <p>yolov11s3_logo_detection</p>
                        </div>
                        <div class="model">
                            <i class="fas fa-brain"></i>
                            <h4>Model 6</h4>
                            <p>yolov11s_cooler_detection</p>
                        </div>
                    </div>
                    <div class="model-features">
                        <h4>Sequential Processing Flow</h4>
                        <ul>
                            <li>Model 1: yolov8s_logo_detection (Primary)</li>
                            <li>If no Symphony found, try Model 2: yolov8s_logo_detection2</li>
                            <li>If still no detection, try Model 3: yolov8s_logo_detection3</li>
                            <li>Continue to Model 4: yolov11s_logo_detection</li>
                            <li>If still no detection, try Model 5: yolov11s3_logo_detection</li>
                            <li>Final attempt: Model 6: yolov11s_cooler_detection</li>
                            <li>Early return when Symphony logo detected (conf ≥ 0.35)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Rate Limits Section -->
            <section id="rate-limits" class="content-section">
                <h2>Rate Limits</h2>
                <div class="card rate-limits">
                    <h3>Endpoint Limits</h3>
                    <div class="limit-grid">
                        <div class="limit">
                            <i class="fas fa-image"></i>
                            <h4>Single Image</h4>
                            <p>100 requests per minute</p>
                        </div>
                        <div class="limit">
                            <i class="fas fa-images"></i>
                            <h4>Batch Processing</h4>
                            <p>20 requests per minute</p>
                        </div>
                        <div class="limit">
                            <i class="fas fa-file-csv"></i>
                            <h4>CSV Export</h4>
                            <p>20 requests per minute</p>
                        </div>
                        <div class="limit">
                            <i class="fas fa-plug"></i>
                            <h4>WebSocket</h4>
                            <p>Real-time updates</p>
                        </div>
                    </div>
                    <div class="limit-info">
                        <h4>Rate Limit Headers</h4>
                        <ul>
                            <li>X-RateLimit-Limit: Maximum requests allowed</li>
                            <li>X-RateLimit-Remaining: Requests remaining</li>
                            <li>X-RateLimit-Reset: Time until limit reset</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Single Image Detection Section -->
            <section id="single-image" class="content-section">
                <h2>Single Image Detection</h2>
                
                <!-- File Processing Workflow Diagram -->
                <div class="card diagram-card">
                    <h3>File Processing Workflow</h3>
                    <div class="svg-container">
                        <div class="zoom-controls">
                            <button class="zoom-btn zoom-in" title="Zoom In"><i class="fas fa-search-plus"></i></button>
                            <button class="zoom-btn zoom-out" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
                            <button class="zoom-btn zoom-reset" title="Reset Zoom"><i class="fas fa-expand-arrows-alt"></i></button>
                        </div>
                        <object data="images/svg/detailed_processing_pipeline.svg" type="image/svg+xml" class="responsive-svg">
                            <img src="images/svg/detailed_processing_pipeline.svg" alt="Processing Pipeline" class="fallback-img">
                        </object>
                    </div>
                </div>
                <div class="card workflow">
                    <h3>Processing Steps</h3>
                    <div class="workflow-steps">
                        <div class="step">
                            <i class="fas fa-upload step-icon"></i>
                            <span class="step-number">1</span>
                            <h4>Input Image</h4>
                            <p>Upload file or enter URL</p>
                        </div>
                        <div class="step">
                            <i class="fas fa-check-circle step-icon"></i>
                            <span class="step-number">2</span>
                            <h4>Validation</h4>
                            <p>File type and size check</p>
                        </div>
                        <div class="step">
                            <i class="fas fa-cogs step-icon"></i>
                            <span class="step-number">3</span>
                            <h4>Processing</h4>
                            <p>Model cascade detection</p>
                        </div>
                        <div class="step">
                            <i class="fas fa-chart-line step-icon"></i>
                            <span class="step-number">4</span>
                            <h4>Results</h4>
                            <p>View detection details</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Batch Processing Section -->
            <section id="batch-processing" class="content-section">
                <h2>Batch Processing</h2>
                
                <!-- Batch Processing Diagram -->
                <div class="card diagram-card">
                    <h3>Batch Processing Flow</h3>
                    <div class="svg-container">
                        <div class="zoom-controls">
                            <button class="zoom-btn zoom-in" title="Zoom In"><i class="fas fa-search-plus"></i></button>
                            <button class="zoom-btn zoom-out" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
                            <button class="zoom-btn zoom-reset" title="Reset Zoom"><i class="fas fa-expand-arrows-alt"></i></button>
                        </div>
                        <object data="images/svg/batch_processing_sequence.svg" type="image/svg+xml" class="responsive-svg">
                            <img src="images/svg/batch_processing_sequence.svg" alt="Batch Processing Flow" class="fallback-img">
                        </object>
                    </div>
                </div>
                <div class="card workflow">
                    <h3>Fault-Tolerant Batch Processing Steps</h3>
                    <div class="workflow-steps">
                        <div class="step">
                            <i class="fas fa-play-circle step-icon"></i>
                            <span class="step-number">1</span>
                            <h4>Start Batch</h4>
                            <p>Initialize batch session with unique ID</p>
                        </div>
                        <div class="step">
                            <i class="fas fa-save step-icon"></i>
                            <span class="step-number">2</span>
                            <h4>Save Files</h4>
                            <p>Store uploaded files to disk with metadata</p>
                        </div>
                        <div class="step">
                            <i class="fas fa-brain step-icon"></i>
                            <span class="step-number">3</span>
                            <h4>Process</h4>
                            <p>Run detection pipeline with recovery support</p>
                        </div>
                        <div class="step">
                            <i class="fas fa-shield-alt step-icon"></i>
                            <span class="step-number">4</span>
                            <h4>Recovery</h4>
                            <p>Automatic resume if interrupted</p>
                        </div>
                        <div class="step">
                            <i class="fas fa-download step-icon"></i>
                            <span class="step-number">5</span>
                            <h4>Export</h4>
                            <p>Download CSV results</p>
                        </div>
                        <div class="step">
                            <i class="fas fa-broom step-icon"></i>
                            <span class="step-number">6</span>
                            <h4>Cleanup</h4>
                            <p>Smart cleanup with pending batch protection</p>
                        </div>
                    </div>
                </div>

                <!-- CSV Export Diagram -->
                <div class="card diagram-card">
                    <h3>CSV Export Process</h3>
                    <div class="svg-container">
                        <div class="zoom-controls">
                            <button class="zoom-btn zoom-in" title="Zoom In"><i class="fas fa-search-plus"></i></button>
                            <button class="zoom-btn zoom-out" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
                            <button class="zoom-btn zoom-reset" title="Reset Zoom"><i class="fas fa-expand-arrows-alt"></i></button>
                        </div>
                        <object data="images/svg/csv_export_lifecycle.svg" type="image/svg+xml" class="responsive-svg">
                            <img src="images/svg/csv_export_lifecycle.svg" alt="CSV Export Process" class="fallback-img">
                        </object>
                    </div>
                </div>
                
                <div class="card batch-tips">
                    <h3>CSV Export Details</h3>
                    <ul>
                        <li>Image path and validation result</li>
                        <li>Confidence scores and model used</li>
                        <li>Bounding box coordinates</li>
                        <li>Batch ID and timestamp</li>
                    </ul>
                </div>

                <!-- Batch Retry Fix -->
                <div class="card feature-card">
                    <h3><i class="fas fa-sync-alt"></i> Improved Batch Retry Tracking</h3>
                    <div class="feature-content">
                        <ul>
                            <li>
                                <strong>Fixed Duplicate Progress:</strong>
                                <ul>
                                    <li>Eliminated duplicate progress increments in batch retry logic</li>
                                    <li>More accurate progress reporting during retries</li>
                                    <li>Consistent progress percentage throughout batch processing</li>
                                    <li>Improved reliability for tracking large batches</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Cleanup Protection System -->
                <div class="card cleanup-protection">
                    <h3><i class="fas fa-shield-alt"></i> Smart Cleanup Protection</h3>
                    <div class="cleanup-features">
                        <div class="cleanup-grid">
                            <div class="cleanup-item">
                                <div class="cleanup-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <h4>Regular Batches</h4>
                                <p>24-hour retention with automatic cleanup</p>
                            </div>
                            <div class="cleanup-item">
                                <div class="cleanup-icon">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <h4>Pending Batches</h4>
                                <p>Protected from cleanup for 3 days</p>
                            </div>
                            <div class="cleanup-item">
                                <div class="cleanup-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <h4>Abandoned Batches</h4>
                                <p>Cleanup after 3 days to prevent accumulation</p>
                            </div>
                        </div>
                        <div class="cleanup-info">
                            <h4>Protection Strategy</h4>
                            <ul>
                                <li><strong>Immediate Protection:</strong> Pending batches are preserved during regular cleanup</li>
                                <li><strong>Recovery Window:</strong> 3-day grace period for interrupted batches</li>
                                <li><strong>Automatic Recovery:</strong> System resumes processing on startup</li>
                                <li><strong>Smart Cleanup:</strong> Separate cleanup functions for different batch states</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- API Integration Section -->
            <section id="api-integration" class="content-section">
                <h2>API Integration</h2>
                
                <!-- API Security Flow Diagram -->
                <div class="card diagram-card">
                    <h3>API Security & Authentication Flow</h3>
                    <div class="svg-container">
                        <div class="zoom-controls">
                            <button class="zoom-btn zoom-in" title="Zoom In"><i class="fas fa-search-plus"></i></button>
                            <button class="zoom-btn zoom-out" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
                            <button class="zoom-btn zoom-reset" title="Reset Zoom"><i class="fas fa-expand-arrows-alt"></i></button>
                        </div>
                        <object data="images/svg/api_security_flow.svg" type="image/svg+xml" class="responsive-svg">
                            <img src="images/svg/api_security_flow.svg" alt="API Security Flow" class="fallback-img">
                        </object>
                    </div>
                </div>
                
                <!-- Frontend API Integration Diagram -->
                <div class="card diagram-card">
                    <h3>Frontend API Integration</h3>
                    <div class="svg-container">
                        <div class="zoom-controls">
                            <button class="zoom-btn zoom-in" title="Zoom In"><i class="fas fa-search-plus"></i></button>
                            <button class="zoom-btn zoom-out" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
                            <button class="zoom-btn zoom-reset" title="Reset Zoom"><i class="fas fa-expand-arrows-alt"></i></button>
                        </div>
                        <object data="images/svg/state_management.svg" type="image/svg+xml" class="responsive-svg">
                            <img src="images/svg/state_management.svg" alt="State Management" class="fallback-img">
                        </object>
                    </div>
                </div>
                <div class="card api-overview">
                    <h3>Key Endpoints</h3>
                    
                    <!-- Single Image Detection -->
                    <div class="api-endpoint">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/api/check-logo/single/</code>
                        </div>
                        <div class="endpoint-content">
                            <h4>Single Image Detection</h4>
                            <p>Detect Symphony logo in a single image file or URL.</p>
                            
                            <h5>Request Example:</h5>
                            <div class="code-block">
                                <div class="code-block-label">Request</div>
                                <pre><code>curl -X POST "http://localhost:8000/api/check-logo/single/" \
  -H "Content-Type: multipart/form-data" \
  -F "file=@image.jpg"</code></pre>
                            </div>
                            
                            <h5>Response Example:</h5>
                            <div class="code-block">
                                <div class="code-block-label">Response</div>
                                <pre><code>{
  "valid": true,
  "confidence": 0.87,
  "model_used": "yolov8s_logo_detection",
  "bounding_box": [120, 45, 280, 180],
  "processing_time": 0.234
}</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Batch Processing -->
                    <div class="api-endpoint">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/api/start-batch</code>
                        </div>
                        <div class="endpoint-content">
                            <h4>Start Batch Session</h4>
                            <p>Initialize a new batch processing session.</p>
                            
                            <h5>Response Example:</h5>
                            <div class="code-block">
                                <div class="code-block-label">Response</div>
                                <pre><code>{
  "batch_id": "batch_20241201_143052_abc123",
  "status": "initialized",
  "created_at": "2024-12-01T14:30:52Z"
}</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Batch Image Detection -->
                    <div class="api-endpoint">
                        <div class="endpoint-header">
                            <span class="method post">POST</span>
                            <code>/api/check-logo/batch/</code>
                        </div>
                        <div class="endpoint-content">
                            <h4>Batch Image Detection</h4>
                            <p>Process multiple images in a batch session.</p>
                            
                            <h5>Request Example:</h5>
                            <div class="code-block">
                                <div class="code-block-label">Request</div>
                                <pre><code>curl -X POST "http://localhost:8000/api/check-logo/batch/" \
  -H "Content-Type: multipart/form-data" \
  -F "batch_id=batch_20241201_143052_abc123" \
  -F "files=@image1.jpg" \
  -F "files=@image2.png" \
  -F "files=@image3.jpg"</code></pre>
                            </div>
                            
                            <h5>Response Example:</h5>
                            <div class="code-block">
                                <div class="code-block-label">Response</div>
                                <pre><code>{
  "batch_id": "batch_20241201_143052_abc123",
  "status": "processing",
  "total_files": 3,
  "processed_files": 0,
  "message": "Batch processing started"
}</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CSV Export -->
                    <div class="api-endpoint">
                        <div class="endpoint-header">
                            <span class="method get">GET</span>
                            <code>/api/check-logo/batch/export-csv/{batch_id}</code>
                        </div>
                        <div class="endpoint-content">
                            <h4>CSV Export</h4>
                            <p>Download batch results as CSV file.</p>
                            
                            <h5>Request Example:</h5>
                            <div class="code-block">
                                <div class="code-block-label">Request</div>
                                <pre><code>curl -X GET "http://localhost:8000/api/check-logo/batch/export-csv/batch_20241201_143052_abc123" \
  -H "Accept: text/csv" \
  -o results.csv</code></pre>
                            </div>
                            
                            <h5>CSV Format:</h5>
                            <div class="code-block">
                                <div class="code-block-label">CSV Output</div>
                                <pre><code>filename,valid,confidence,model_used,bounding_box,processing_time
image1.jpg,true,0.87,yolov8s_logo_detection,"[120,45,280,180]",0.234
image2.png,false,0.12,yolov11s3_logo_detection,"[]",0.189
image3.jpg,true,0.92,yolov8s_logo_detection2,"[95,30,255,165]",0.267</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <!-- WebSocket -->
                    <div class="api-endpoint">
                        <div class="endpoint-header">
                            <span class="method ws">WS</span>
                            <code>/ws/batch/{batch_id}</code>
                        </div>
                        <div class="endpoint-content">
                            <h4>WebSocket Updates</h4>
                            <p>Real-time batch processing progress updates.</p>
                            
                            <h5>Message Example:</h5>
                            <div class="code-block">
                                <div class="code-block-label">WebSocket Message</div>
                                <pre><code>{
  "type": "progress",
  "batch_id": "batch_20241201_143052_abc123",
  "processed": 15,
  "total": 50,
  "current_file": "image_015.jpg",
  "status": "processing"
}</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Troubleshooting Section -->
            <section id="troubleshooting" class="content-section">
                <h2>Troubleshooting</h2>
                
                <!-- Error Handling Diagram -->
                <div class="card diagram-card">
                    <h3>Error Handling & Monitoring</h3>
                    <div class="svg-container">
                        <div class="zoom-controls">
                            <button class="zoom-btn zoom-in" title="Zoom In"><i class="fas fa-search-plus"></i></button>
                            <button class="zoom-btn zoom-out" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
                            <button class="zoom-btn zoom-reset" title="Reset Zoom"><i class="fas fa-expand-arrows-alt"></i></button>
                        </div>
                        <object data="images/svg/error_handling_monitoring.svg" type="image/svg+xml" class="responsive-svg">
                            <img src="images/svg/error_handling_monitoring.svg" alt="Error Handling & Monitoring" class="fallback-img">
                        </object>
                    </div>
                </div>
                
                <!-- Rate Limit Issues -->
                <div class="card error-card">
                    <h3><i class="fas fa-tachometer-alt"></i> Rate Limit Issues</h3>
                    <div class="error-example">
                        <div class="error-message">
                            <i class="fas fa-exclamation-circle"></i>
                            <code>429 Too Many Requests: Rate limit exceeded</code>
                        </div>
                        <div class="error-details">
                            <h4>Common Causes:</h4>
                            <ul>
                                <li>Single image endpoint: Exceeded 100 requests/minute</li>
                                <li>Batch processing: Exceeded 20 requests/minute</li>
                                <li>CSV export: Exceeded 20 requests/minute</li>
                            </ul>
                            <h4>Solutions:</h4>
                            <ul>
                                <li>Check X-RateLimit-Reset header for reset time</li>
                                <li>Implement exponential backoff</li>
                                <li>Use batch processing instead of multiple single requests</li>
                                <li>Monitor X-RateLimit-Remaining header</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- File Validation Issues -->
                <div class="card error-card">
                    <h3><i class="fas fa-file-alt"></i> File Validation Issues</h3>
                    <div class="error-example">
                        <div class="error-message">
                            <i class="fas fa-exclamation-circle"></i>
                            <code>400 Bad Request: Invalid file format or size</code>
                        </div>
                        <div class="error-details">
                            <h4>Common Causes:</h4>
                            <ul>
                                <li>Unsupported file type (only JPG, JPEG, PNG allowed)</li>
                                <li>File size exceeds limit (10MB per file)</li>
                                <li>Corrupted image file</li>
                                <li>Empty file upload</li>
                            </ul>
                            <h4>Solutions:</h4>
                            <ul>
                                <li>Verify file format before upload</li>
                                <li>Compress large images</li>
                                <li>Check file integrity</li>
                                <li>Ensure proper file encoding</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Model Processing Issues -->
                <div class="card error-card">
                    <h3><i class="fas fa-brain"></i> Model Processing Issues</h3>
                    <div class="error-example">
                        <div class="error-message">
                            <i class="fas fa-exclamation-circle"></i>
                            <code>Low Confidence: Model cascade completed without confident detection</code>
                        </div>
                        <div class="error-details">
                            <h4>Common Causes:</h4>
                            <ul>
                                <li>Image quality too low</li>
                                <li>Logo too small or unclear</li>
                                <li>Complex background interference</li>
                                <li>Unusual logo orientation</li>
                            </ul>
                            <h4>Solutions:</h4>
                            <ul>
                                <li>Use higher quality images</li>
                                <li>Ensure logo is clearly visible</li>
                                <li>Minimize background noise</li>
                                <li>Try different image angles</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Batch Processing Issues -->
                <div class="card error-card">
                    <h3><i class="fas fa-tasks"></i> Batch Processing Issues</h3>
                    <div class="error-example">
                        <div class="error-message">
                            <i class="fas fa-exclamation-circle"></i>
                            <code>Batch Processing Error: Invalid batch state or timeout</code>
                        </div>
                        <div class="error-details">
                            <h4>Common Causes:</h4>
                            <ul>
                                <li>Invalid batch ID</li>
                                <li>Batch session expired</li>
                                <li>Too many files in single batch</li>
                                <li>Network timeout during processing</li>
                                <li>Server restart during processing (now auto-recovered)</li>
                            </ul>
                            <h4>Solutions:</h4>
                            <ul>
                                <li>Verify batch ID is valid</li>
                                <li>Process batches within session timeout</li>
                                <li>Split large batches into smaller ones</li>
                                <li>Check network stability</li>
                                <li>System automatically recovers from restarts</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Recovery System -->
                <div class="card recovery-info">
                    <h3><i class="fas fa-sync-alt"></i> Automatic Recovery System</h3>
                    <div class="recovery-features">
                        <h4>How Recovery Works</h4>
                        <ul>
                            <li><strong>Startup Scan:</strong> System automatically detects pending batches on startup</li>
                            <li><strong>File Persistence:</strong> Uploaded files are saved to disk before processing</li>
                            <li><strong>State Tracking:</strong> Progress is tracked in pending_files.json and pending_urls.json</li>
                            <li><strong>Resume Processing:</strong> Interrupted batches resume from last saved state</li>
                            <li><strong>Clean Completion:</strong> All temporary files are cleaned up after completion</li>
                        </ul>
                        <div class="recovery-note">
                            <i class="fas fa-info-circle"></i>
                            <p><strong>Note:</strong> The system now provides 100% reliability for batch processing. Server restarts, crashes, or network interruptions no longer cause data loss.</p>
                        </div>
                    </div>
                </div>

                <!-- CSV Export Issues -->
                <div class="card error-card">
                    <h3><i class="fas fa-file-csv"></i> CSV Export Issues</h3>
                    <div class="error-example">
                        <div class="error-message">
                            <i class="fas fa-exclamation-circle"></i>
                            <code>Export Error: Unable to generate or download CSV</code>
                        </div>
                        <div class="error-details">
                            <h4>Common Causes:</h4>
                            <ul>
                                <li>Batch processing not complete</li>
                                <li>Export timeout</li>
                                <li>Rate limit exceeded</li>
                                <li>Invalid batch results</li>
                            </ul>
                            <h4>Solutions:</h4>
                            <ul>
                                <li>Wait for batch completion</li>
                                <li>Check batch status before export</li>
                                <li>Monitor rate limits</li>
                                <li>Verify batch results exist</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Best Practices -->
                <div class="card best-practices">
                    <h3><i class="fas fa-check-circle"></i> Error Prevention Best Practices</h3>
                    <ul>
                        <li>Monitor rate limits using response headers</li>
                        <li>Validate files before upload</li>
                        <li>Implement proper error handling</li>
                        <li>Use batch processing for multiple files</li>
                        <li>Keep batch sizes manageable</li>
                        <li>Download CSV exports promptly</li>
                        <li>Implement proper retry logic</li>
                        <li>Log errors for debugging</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-brand">
                <img src="https://shop.symphonylimited.com/cdn/shop/files/logo-new-header.png?v=1704892972" alt="Symphony Logo" class="footer-logo">
                <p>&copy; 2024 Symphony Limited. All rights reserved.</p>
            </div>
            <div class="footer-links">
                <a href="#overview">Documentation</a>
                <a href="#api-integration">API Reference</a>
                <a href="#troubleshooting">Support</a>
            </div>
        </div>
    </footer>
    
    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top" title="Back to Top" aria-label="Back to top"><i class="fas fa-arrow-up"></i></button>
    
    <script src="js/main.js"></script>
</body>
</html> 